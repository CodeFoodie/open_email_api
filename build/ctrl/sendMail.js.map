{"version":3,"sources":["../../src/ctrl/sendMail.js"],"names":["dotenv","config","sgMail","setApiKey","process","env","SENDGRID_API_KEY","sendEmail","data","receiver","subject","message","msg","to","from","html","send","result","request","success","sendmailCallBack","req","res","body","status","suceess","error"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;AAEAA,mBAAOC,MAAP;;AAEAC,iBAAOC,SAAP,CAAiBC,OAAO,CAACC,GAAR,CAAYC,gBAA7B;AAEA;;;;;;;;;;AASA,IAAMC,SAAS;AAAA,qEAAG,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGZC,YAAAA,QAHY,GAMVD,IANU,CAGZC,QAHY,EAIZC,OAJY,GAMVF,IANU,CAIZE,OAJY,EAKZC,OALY,GAMVH,IANU,CAKZG,OALY;AAORC,YAAAA,GAPQ,GAOF;AACVC,cAAAA,EAAE,EAAEJ,QADM;AAEVK,cAAAA,IAAI,EAAE,wBAFI;AAGVJ,cAAAA,OAAO,EAAPA,OAHU;AAIVK,cAAAA,IAAI,YAAKJ,OAAL;AAJM,aAPE;AAAA;AAAA,mBAaOT,iBAAOc,IAAP,CAAYJ,GAAZ,CAbP;;AAAA;AAaRK,YAAAA,MAbQ;;AAAA,kBAcVA,MAAM,CAAC,CAAD,CAAN,IAAaA,MAAM,CAAC,CAAD,CAAN,CAAUC,OAdb;AAAA;AAAA;AAAA;;AAAA,6CAeL;AAAEC,cAAAA,OAAO,EAAE,IAAX;AAAiBR,cAAAA,OAAO,EAAE;AAA1B,aAfK;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,6CAkBP;AAAEQ,cAAAA,OAAO,EAAE,KAAX;AAAkBR,cAAAA,OAAO,EAAE;AAA3B,aAlBO;;AAAA;AAAA,6CAoBT,KApBS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAATJ,SAAS;AAAA;AAAA;AAAA,GAAf;;AAuBA,IAAMa,gBAAgB;AAAA,sEAAG,kBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACFf,SAAS,CAACc,GAAG,CAACE,IAAL,CADP;;AAAA;AACjBN,YAAAA,MADiB;;AAAA,iBAEnBA,MAAM,CAACE,OAFY;AAAA;AAAA;AAAA;;AAAA,8CAGdG,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBR,IAAhB,CAAqB;AAC1BQ,cAAAA,MAAM,EAAE,GADkB;AAE1BC,cAAAA,OAAO,EAAE,IAFiB;AAG1Bd,cAAAA,OAAO,EAAE;AAHiB,aAArB,CAHc;;AAAA;AAAA,8CAShBW,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBR,IAAhB,CAAqB;AAC1BQ,cAAAA,MAAM,EAAE,GADkB;AAE1BC,cAAAA,OAAO,EAAE,KAFiB;AAG1BC,cAAAA,KAAK,EAAE;AAHmB,aAArB,CATgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAhBN,gBAAgB;AAAA;AAAA;AAAA,GAAtB;;eAgBe;AAAEb,EAAAA,SAAS,EAATA,SAAF;AAAaa,EAAAA,gBAAgB,EAAhBA;AAAb,C","sourcesContent":["import sgMail from '@sendgrid/mail';\nimport dotenv from 'dotenv';\nimport 'regenerator-runtime/runtime';\n\ndotenv.config();\n\nsgMail.setApiKey(process.env.SENDGRID_API_KEY);\n\n/**\n * Creates an instance of sendMail.\n *\n * @constructor\n * @param {string} data.receiver The email of the receiver.\n * @param {string} data.subject The subject of the sender's message.\n * @param {string} data.message The message from sender.\n*/\n\nconst sendEmail = async (data) => {\n  try {\n    const {\n      receiver,\n      subject,\n      message,\n    } = data;\n    const msg = {\n      to: receiver,\n      from: 'noreply@codefoodie.com',\n      subject,\n      html: `${message}`,\n    };\n    const result = await sgMail.send(msg);\n    if (result[0] && result[0].request) {\n      return { success: true, message: 'Email sent successfully' };\n    }\n  } catch (error) {\n    return { success: false, message: 'incomplete Task' };\n  }\n  return false;\n};\n\nconst sendmailCallBack = async (req, res) => {\n  const result = await sendEmail(req.body);\n  if (result.success) {\n    return res.status(201).send({\n      status: 201,\n      suceess: true,\n      message: 'Email sent successfully',\n    });\n  }\n  return res.status(500).send({\n    status: 500,\n    suceess: false,\n    error: 'Incomplete task, please try again',\n  });\n};\n\nexport default { sendEmail, sendmailCallBack };\n"],"file":"sendMail.js"}